@using HelpDesk.Models.PLA.Accounts
@using HelpDesk.Models.PLA.Tickets
@using HelpDesk.Services.Identity

@inject IdentityService IdentityService

<MudText Typo="Typo.subtitle2" Class="mb-4">
    Автор заявки:
</MudText>
<MudChat ChatPosition="ChatBubblePosition.Start" Color="Color.Primary" ArrowPosition="ChatArrowPosition.Bottom">
    <MudAvatar Color="Color.Primary">@IdentityView?.LastName.FirstOrDefault()@IdentityView?.FirstName.FirstOrDefault()</MudAvatar>
    <MudChatHeader Name="@($"{IdentityView?.LastName} {IdentityView?.FirstName} {IdentityView?.MiddleName}")"/>
    <MudChatBubble>
        @Ticket?.Description
    </MudChatBubble>
</MudChat>

@code {
    
    [Parameter] public TicketView? Ticket { get; set; } = default!;
    private IdentityView? IdentityView;

    protected override async Task OnParametersSetAsync()
    {
       await base.OnParametersSetAsync();
       IdentityView = await IdentityService.GetIdentityView(Ticket?.UserId);
    }

}